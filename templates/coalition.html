{% extends "layout.html"%} {% block title %} {{ name }} {% endblock %} {% block body %}

<div class="templatediv">

    <div class="templatedivtopper coalitiontopper">
        <h1 class="templatedivtitle"><span class="material-icons-outlined iconlarge">
            public
            </span>{{ name }}</h1>
        <div class="templatedivad"></div>
    </div>

    <div class="templatedivcontent">

        <!--<div class="coalitionimagediv">

            <img class="coalitionimage" src="files/images/file.svg" /> // currently turned this off because it looks broken

        </div> -->

        <div class="templatedivflex2 menuflex2">
            <div class="templatedivflex2left" id="coalitiongeneral" onclick="coalitiongeneral()">

                <h3 class="smallheader">General</h3>

            </div>
            {% if userInCol %}
            <!-- if user isnt in coalition, maybe this is wrong ?-->
            <script>
                $(document).ready(function() {

                    joinhide();

                });
            </script>
            {% endif %}

            <div class="templatedivflex2left" id="coalitionjoin" onclick="coalitionjoin()">
                <h3 class="smallheader">Join</h3>
                <!--HIDE THIS WHEN USER IS A COALITION MEMBER-->
            </div>

            {% if user_role not in ["leader", "deputy_leader", "banker", "tax_collector", "foreign_ambassador", "general"] %}
            <script>
                $(document).ready(function() {

                    leaderhide();

                });
            </script>
            {% endif %}

            <div class="templatedivflex2left" id="coalitionleader" onclick="coalitionleader()">
                <h3 class="smallheader">Leader Panel</h3>
                <!--SHOW THIS TO GOVERNMENT ONLY-->
                <!-- somewhy doesnt work, no idea why -->
            </div>

            {% if not userInCol %}
            <!--TODO: fix this lul-->
            <script>
                $(document).ready(function() {

                    memberhide();

                });
            </script>
            {% endif %} {% if userInCurCol and user_role not in ["leader", "deputy_leader"] %}
            <div class="templatedivflex2left" id="coalitionmember" onclick="coalitionmember()">
                <h3 class="smallheader">Member Panel</h3>
            </div>
            {% endif %}

        </div>
        <!--GENERAL-->
        <div class="general" id="general">

            <div class="countryimagediv" style="background-image: url(https://i.pinimg.com/originals/5e/65/20/5e6520289b44e11a9e74363c18ce3ee1.jpg);">

                <!--coalition flag-->
                {% if flag != None %}
                <img class="countryimage" src="/static/flags/{{ flag }}" alt="{{ flag }}"> {% else %}
                <img class="countryimage" src="{{ url_for('static', filename='images/tajmahal.jpg') }}" /> {% endif %}
            </div>

            {% if description != None %}
            <h2 class="templatecontentheaderleft">About</h2>

            <div class="strongpadding">{{ description }}</div>
            {% endif %}

            <div class="templatedivflex2">
                <div class="templatedivflex2left">

                    <table class="templatetable">
                        <tr>
                            <th><span class="material-icons-outlined">
                                info
                                </span>General</th>
                        </tr>
                        <tr>
                            {% if leaders|length
                            < 2%} <td>Leader:</td>
                                <td><a href="/country/id={{ leaders[0] }}">{{ leaderNames[0] }}</a></td>
                                {% else %}
                                <td>Leaders:</td>
                                <td>
                                    {% for leader_id in leaders %} {% if leader_id == leaders[-1] %}
                                    <a href="/country/id={{ leader_id }}">{{ leaderNames[leaders.index(leader_id)] }}</a> {% else %}
                                    <a href="/country/id={{ leader_id }}">{{ leaderNames[leaders.index(leader_id)] }}, </a> {% endif %} {% endfor %}
                                </td>
                                {% endif %}
                        </tr>
                        <tr>
                            <td>Deputy Leaders:</td>
                            <td>[[deputy leaders]]</td>
                        </tr>
                        <tr>
                            <td>Ministers:</td>
                            <td>[[ministers]]</td>
                        </tr>
                        <tr>
                            <td>Members:</td>
                            <!-- <td><a href="{{ alinktocoalitionmembers }}">{{ coalitionmembers }}</a></td> 
                            currently disabled the link because we dont have where to link, will show count of total members
                            -->
                            <td>
                                <a href="/coalition/members">{{ members }}</a></td>
                        </tr>
                        <tr>
                            <td>Influence:</td>
                            <td>{{ total_influence }}</td>
                        </tr>
                        <tr>
                            <td>Average Influence:</td>
                            <td>{{ average_influence }}</td>
                        </tr>
                        <tr>
                            <td>Coalition type:</td>
                            <td>{{ colType }}</td>
                        </tr>
                        <tr>
                            <td><span class="material-icons-outlined">
                                library_music
                                </span>Anthem:</td>
                            <td>
                                <img src="{{ countryAnthem }}" class="countryanthem" />
                            </td>
                        </tr>
                    </table>
                    <table class="templatetable">
                        <tr>
                            <th><span class="material-icons-outlined">
                                military_tech
                                </span>Military</th>
                        </tr>
                        <tr>
                            <td>Military power:</td>
                            <td>power#</td>
                        </tr>
                        <tr>
                            <td>Land Military:</td>
                            <td>30%</td>
                        </tr>
                        <tr>
                            <td>Air Military:</td>
                            <td>60%</td>
                        </tr>
                        <tr>
                            <td>Water Military:</td>
                            <td>10%</td>
                        </tr>
                        <tr>
                            <td class="anchor"><a class="forgotpasscode loginsignupforgot" href="nationstats">View stats</a></td>
                        </tr>
                        <tr>
                    </table>

                </div>
                <div class="templatedivflex2left">

                    <table class="templatetable">
                        <th><span class="material-icons-outlined">
                            public
                            </span>Affairs</th>
                        </tr>
                        <tr>
                            <td>Allied:</td>
                            <td>Y / N</td>
                        </tr>
                        <!--ONLY display ally TYPE (below) if nation IS in an ALLIED coalition-->
                        <tr>
                            <td>Ally Type:</td>
                            <td>{{ treatyType }}</td>
                        </tr>
                        <tr>
                            <td>Allies:</td>
                            <td>View allies</td>
                        </tr>
                        <tr>
                            <td>Block</td>
                            <td>{{ block }}</td>
                        </tr>
                        <tr>
                    </table>
                    <table class="templatetable">
                        <th><span class="material-icons-outlined">
                            article
                            </span>More Info</th>
                        </tr>
                        <tr>
                            <td>Total Provinces:</td>
                            <td>{{ coalitionProvinces }}</td>
                        </tr>
                        <tr>
                            <td>Average Provinces:</td>
                            <td>{{ coalitionAverageProvinces }}</td>
                        </tr>
                        <tr>
                            <td>Total Cities:</td>
                            <td>{{ coalitionCities }}</td>
                        </tr>
                        <tr>
                            <td>Average Cities:</td>
                            <td>{{ coalitionAverageCities }}</td>
                        </tr>
                        <tr>
                            <td>Total Land:</td>
                            <td>{{ coalitionCities }}</td>
                        </tr>
                        <tr>
                            <td>Average Land:</td>
                            <td>{{ coalitionAverageCities }}</td>
                        </tr>
                        <tr>
                            <td>Total GPD:</td>
                            <td>{{ coalitiongpd }}</td>
                        </tr>
                        <tr>
                            <td>Average GPD:</td>
                            <td>{{ coalitiongpdPerCapita }}</td>
                        </tr>
                    </table>

                </div>
            </div>
        </div>
        <!--JOIN-->
        <div class="join" id="join">

            <!--if the coalition has created a message show it-->
            <!--
            <h2 class="templatecontentheadercenter">Message From {{ name }}</h2>

            <p class="templatecontentpcenter">
                [[ message ]]
            </p>
             -->

            <!-- temporarily disabled because no such feature -->

            <!--show until here-->
            <div class="infodiv">
                {% if colType == "Invite Only" %}
                <p class="templatecontentpleft">
                    You are applying for {{ name }} please send a message to them about why you want to join, what you can offer or whatever else you would like to say.
                </p>
                <textarea name="message" class="templatetextarea" autocomplete="off" maxlength="1000" placeholder="Your message"></textarea> {% endif %}
                <!--if not at war don't show the warning below-->
                <ul class="warning">
                    {{ name }} is currently at war!
                </ul>

                {% if colType == "Invite Only" %}
                <form action="/join/{{ colId }}" method="POST">
                    <button type="submit" value="submit" class="templatedivbutton templatecenteredbutton"><span class="material-icons-outlined">
                    arrow_forward
                    </span>Apply</button>
                </form>
                {% endif %}

                <!--Hide / deactvate certian buttons depending on the coalition type-->
                <!--will become deactivated if the user doesnt meet the specified influence-->

                <!-- currently only added join for open coalitions, without message-->

                </form>

                {% if colType == "Open" %}
                <ul>
                    Are you sure you would like to join {{ name }}?
                </ul>
                <form action="/join/{{ colId }}" method="POST">
                    <button type="submit" class="templatedivbutton templatecenteredbutton" value="submit"><span class="material-icons-outlined">
                    arrow_forward
                    </span>Join</button>
                </form>
                {% endif %}
                <!--There buttons will be deactivated-->
                <!-- <button class="templatedivbutton loginsignupbutton templateclosedbutton" disabled="disabled">Not enough Influence</button> -->
                <!--if the player does not meet the specified (by the leader) influnece required to join the coalition this button will appear-->
            </div>
        </div>

        <!--LEADER PANEL-->

        <div class="leader" id="leader">
            <!-- fix not being able to go here from /coalition even if user is leader-->

            {% if user_role in ["leader", "deputy_leader", "domestic_minister"] %}
            <h2 class="templatecontentheaderleft">Government</h2>

            <div class="infodiv">

                <form action="/give_position" method="POST">
                    <div class="templatedivflex2 divflex2center menuflex">
                        <div class="templatedivflex2left">

                            <select class="templateselect" name="role" required>
                            <option class="templateoption" selected disabled>Choose Position</option>
                            <option value="leader" class="templateoption">Leader</option>
                            <option value="banker" class="templateoption">Banker</option>
                            <option value="tax_collector" class="templateoption">Tax Collector</option>
                            <option value="foreign_ambassador" class="templateoption">Foreign Ambassadors</option>
                            <option value="general" class="templateoption">General</option>
                            <option value="domestic_minister" class="templateoption">Domestic Minister</option>
                            <option value="member" class="templateoption">Member</option>
                        </select>

                        </div>
                        <div class="templatedivflex2left">
                            <input class="loginsignupinput" autocomplete="off" name="username" placeholder="Enter country name" />
                        </div>
                    </div>
                    <button class="templatedivbutton templatecenteredbutton" required><span class="material-icons-outlined">
                    check
                    </span>Give Position</button>
                </form>
                <!--max lenth of 10-->
                <div class="templateoutertablediv inverttable">
                    <table class="templatetable templatetable2">
                        <tr>
                            <th>Role</th>
                            <th>About</th>
                            <th>Members</th>
                        </tr>
                        <tr>
                            <td>Leaders:</td>
                            <td>Power over all aspects of the coalition.</td>
                            <td>{{ member_roles["leader"] }}</td>
                        </tr>
                        <tr>
                            <td>Deputy Leader:</td>
                            <td>Power over all aspects of the coalition, excluding coalition name and flag.</td>
                            <td>{{ member_roles["deputy_leader"] }}</td>
                        </tr>
                        <tr>
                            <td>Domestic Ministers:</td>
                            <td>Permission to add and remove members, and change roles of people below them.</td>
                            <td>{{ member_roles["domestic_minister"] }}</td>
                        </tr>
                        <tr>
                            <td>Bankers:</td>
                            <td>Able to accept widthdraw requests, edit automatic deposits, and withdraw resources.</td>
                            <td>{{ member_roles["banker"] }}</td>
                        </tr>
                        <tr>
                            <td>Tax Collectors:</td>
                            <td>Permission to edit tax brackets, and change who are in brackets.</td>
                            <td>{{ member_roles["tax_collector"] }}</td>
                        </tr>
                        <tr>
                            <td>Foreign Ambassadors:</td>
                            <td>Power to add and remove treaties.</td>
                            <td>{{ member_roles["foreign_ambassador"] }}</td>
                        </tr>
                        <tr>
                            <td>Generals:</td>
                            <td>Ability to declare coalition wars, edit war message, and edit war range.</td>
                            <td>{{ member_roles["general"] }}</td>
                        </tr>
                        <tr>
                            <td>Members:</td>
                            <td>Can deposit into the bank, and make requests to withdraw from it.</td>
                            <td>{{ member_roles["member"] }}</td>
                        </tr>
                    </table>
                </div>

                <!--
                <button class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                    check
                    </span>Update</button>
                -->
            </div>
            {% endif %} {% if user_role in ["leader", "deputy_leader", "banker"] %}
            <h2 class="templatecontentheaderleft">Bank</h2>

            <div class="infodiv">

                <form method="POST">
                    <div class="templateoutertablediv inverttable">
                        <table class="templatetable templatetable2">
                            <tr>
                                <th>Resource</th>
                                <th>Bank's resources</th>
                                <th>Your resources</th>
                                <th>Action</th>
                            </tr>
                            <tr>
                                <td>Money:</td>
                                <td>{{ bankRaw['money'] }}</td>
                                <td>[[ countries money ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="money" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Rations:</td>
                                <td>{{ bankRaw['rations'] }}</td>
                                <td>[[ countries rations ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="rations" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Oil:</td>
                                <td>{{ bankRaw['oil'] }}</td>
                                <td>[[ countries oil ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="oil" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Coal:</td>
                                <td>{{ bankRaw['coal'] }}</td>
                                <td>[[ countries coal ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="coal" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Uranium:</td>
                                <td>{{ bankRaw['uranium'] }}</td>
                                <td>[[ countries uranium ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="uranium" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Iron:</td>
                                <td>{{ bankRaw['iron'] }}</td>
                                <td>[[ countries iron ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="iron" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Lead:</td>
                                <td>{{ bankRaw['lead'] }}</td>
                                <td>[[ countries lead ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="lead" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Bauxite:</td>
                                <td>{{ bankRaw['bauxite'] }}</td>
                                <td>[[ countries bauxite ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="bauxite" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Copper:</td>
                                <td>{{ bankRaw['copper'] }}</td>
                                <td>[[ countries copper ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="copper" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Lumber:</td>
                                <td>{{ bankRaw['lumber'] }}</td>
                                <td>[[ countries lumber ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="lumber" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Components:</td>
                                <td>{{ bankRaw['components'] }}</td>
                                <td>[[ countries components ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="components" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Steel:</td>
                                <td>{{ bankRaw['steel'] }}</td>
                                <td>[[ countries steel ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="steel" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Consumer goods:</td>
                                <td>{{ bankRaw['consumer_goods'] }}</td>
                                <td>[[ countries consumergoods ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="consumer_goods" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Aluminum:</td>
                                <td>{{ bankRaw['aluminium'] }}</td>
                                <td>[[ countries aluminium ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="aluminium" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Gasoline:</td>
                                <td>{{ bankRaw['gasoline'] }}</td>
                                <td>[[ countries gasoline ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="gasoline" placeholder="Amount" /></td>
                            </tr>
                            <tr>
                                <td>Ammunition:</td>
                                <td>{{ bankRaw['ammunition'] }}</td>
                                <td>[[ countries ammunition ]]</td>
                                <td><input class="loginsignupinput" autocomplete="on" name="ammunition" placeholder="Amount" /></td>
                            </tr>
                        </table>
                    </div>

                    <div class="templatedivflex2 divflex2center">
                        <div class="templatedivflex2left">

                            <button formaction="/deposit_into_bank/{{ colId }}" class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                            arrow_downward
                            </span>Deposit</button>

                        </div>
                        <div class="templatedivflex2left">

                            <button formaction="/withdraw_from_bank/{{ colId }}" class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                            arrow_forward
                            </span>Withdraw</button>

                        </div>
                    </div>
                </form>

                <form method="POST">
                    <div class="templateoutertablediv inverttable">
                        <table class="templatetable templatetable2">
                            <tr>
                                <th>Name</th>
                                <th>Request</th>
                                <th>Action</th>
                            </tr>
                            {% for data in bankRequests %}
                            <tr>
                                <td><a href="/country/id={{ data[0] }}">{{ data[4] }}</a></td>
                                <td>
                                    <!--for every resource requested-->
                                    {{ data[1] }} {{ data[2] }}<br/>
                                    <!---->
                                </td>
                                <td>
                                    <div class="templatedivflex2 menuflex">
                                        <div class="templatedivflex2left">

                                            <button formaction="/accept_bank_request/{{ data[3] }}"><span class="material-icons iconblue">
                                            check_circle_outline
                                        </span></button>

                                        </div>
                                        <div class="templatedivflex2left">

                                            <button formaction="/remove_bank_request/{{ data[3] }}"><span class="material-icons iconred">
                                            remove_circle_outline
                                            </span></button>

                                        </div>
                                    </div>
                                </td>

                            </tr>
                            {% endfor %}
                        </table>
                    </div>
                </form>
            </div>
            {% endif %} {% if user_role in ["leader", "deputy_leader", "foreign_ambassador"] %}
            <h2 class="templatecontentheaderleft">Diplomacy</h2>

            <div class="infodiv">

                <form action="/offer_treaty" method="POST">
                    <h2 class="templatecontentheadercenter">Add Ally</h2>

                    <input class="loginsignupinput" autocomplete="off" name="coalition_name" placeholder="Coalition name" />

                    <input class="loginsignupinput" autocomplete="off" name="treaty_name" placeholder="Treaty name" />

                    <textarea class="templatetextarea" name="treaty_message" placeholder="Desribe the treaty" maxlength="5000"></textarea>

                    <button class="templatedivbutton templatecenteredbutton" required><span class="material-icons-outlined">
                    arrow_forward
                    </span>Send Offer</button>
                </form>
                <!--if no requests-->
                {% if ingoing_length == 0 %}
                <h2 class="templatecontentheadercenter">No incoming treaty requests</h2>
                <!--if requests-->
                {% elif ingoing_length != 0 %}
                <h2 class="templatecontentheadercenter">Treaty Requests</h2>

                <div class="templateoutertablediv inverttable">
                    <table class="templatetable templatetable2">
                        <tr>
                            <th>Coalition Name</th>
                            <th>Treaty name</th>
                            <th>Treaty description</th>
                            <th>Action</th>
                        </tr>
                        <!--for every coalition make a row with 10 max-->
                    {% for id, col_id, col_name, treaty_name, treaty_description in zip(ingoing_treaties["ids"], ingoing_treaties["col_ids"],ingoing_treaties["col_names"],ingoing_treaties["treaty_names"],ingoing_treaties["treaty_descriptions"]) %}
                        <tr>
                            <td><a href="/coalition/{{ col_id[0] }}">{{ col_name[0] }}</a></td>
                            <td>{{ treaty_name[0] }}</td>
                            <td>{{ treaty_description }}</td>
                            <form method="POST">
                                <td>
                                    <button formaction="/accept_treaty/{{ id[0] }}"><span class="material-icons iconblue">
                                check_circle_outline
                                        </span></button>
                                    <button formaction="/decline_treaty/{{ id[0] }}"><span class="material-icons iconred">
                                remove_circle_outline
                                        </span></button>
                                </td>
                            </form>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
                {% endif %}
                <!--If no allies-->
                {% if active_length == 0 %}
                <h2 class="templatecontentheadercenter">No allies</h2>
                <!--if allies-->
                {% elif active_length != 0 %}
                <h2 class="templatecontentheadercenter">Current Allies</h2>

                <div class="templateoutertablediv inverttable">
                    <table class="templatetable templatetable2">
                        <tr>
                            <th>Ally</th>
                            <th>Treaty</th>
                            <th>Description</th>
                            <th>Action</th>
                        </tr>
                        <!--for every ally make a row-->
                        {% for coalition_id, coalition_name, treaty_name, id, treaty_description in active_treaties %}
                        <tr>
                            <td><a href="/coalition/{{ coalition_id }}">{{ coalition_name }}</a></td>
                            <td>{{ treaty_name }}</td>
                            <td>{{ treaty_description }}</td>
                            <form method="POST">
                                <td><button formaction="/break_treaty/{{ id }}"><span class="material-icons iconred">
                                                remove_circle_outline
                                                </span></button></td>
                            </form>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
                {% endif %}

            </div>

            <!-- Temporarily disabled, because taxes will be added after beta-->
            <!--
            <h2 class="templatecontentheaderleft">Taxes</h2>

            <div class="infodiv">


                <h2 class="templatecontentheadercenter">New Bracket</h2>
                <div class="templatedivflex2 divflex2center">
                    <div class="templatedivflex2left">

                        <input class="loginsignupinput" name="bracketName" placeholder="Bracket Name" />

                    </div>
                    <div class="templatedivflex2right">

                        <label class="vanilla mediumsmall">Members in bracket include</label>
                        <select class="templateselect" name="diplomacy">

                            <option class="templateoption" selected disabled>Set Operator</option>
                            <option class="templateoption">influence amount</option>
                            <option class="templateoption">provinces count</option>
                        
                        </select>

                    </div>
                </div>
                <div class="templatedivflex2 divflex2center">
                    <div class="templatedivflex2left">

                        <input class="loginsignupinput" placeholder="From" />

                    </div>
                    <div class="templatedivflex2right">

                        <input class="loginsignupinput" placeholder="To" />

                    </div>
                </div>
                <button class="templatedivbutton templatecenteredbutton" required><span class="material-icons-outlined">
                    add_circle_outline
                    </span>Create Bracket</button>
                

            <div class="templateoutertablediv inverttable">
                <table class="templatetable templatetable2">
                    <tr>
                        <th>Name</th>
                        <th>Bracket</th>
                        <th>Action</th>
                    </tr>
                    <tr>
                        <td>[[ bracketName]]:</td>
            <td>[[ bracketInfo ]]</td>
            <td><span class="material-icons iconred">
                                remove_circle_outline
                                        </span></td>
            </tr>
            </table>
        </div>

        <button class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                    check
                    </span>Update</button>
    </div>
    {% endif %}
            
            <h2 class="templatecontentheaderleft">War Range</h2>

            <div class="infodiv">

                <h2 class="templatecontentheadercenter">New Canon</h2>
                <div class="templatedivflex2 divflex2center">
                    <div class="templatedivflex2left">

                        <input class="loginsignupinput" name="canonName" placeholder="Canon Name" />

                    </div>
                    <div class="templatedivflex2right">

                        <label class="vanilla mediumsmall">Members in canon may not</label>
                        <select class="templateselect" name="diplomacy">

                            <option class="templateoption" selected disabled>Set Operator</option>
                            <option class="templateoption">Attack influence</option>
                            <option class="templateoption">Attack coalitions</option>
                            <option class="templateoption">Attack provinces</option>
                        
                        </select>

                    </div>
                </div>
                <div class="templatedivflex2 divflex2center">
                    <div class="templatedivflex2left">

                        <input class="loginsignupinput" name="canonName" placeholder="From" />

                    </div>
                    <div class="templatedivflex2right">

                        <input class="loginsignupinput" name="canonName" placeholder="To" />

                    </div>
                </div>
                <button class="templatedivbutton templatecenteredbutton" required><span class="material-icons-outlined">
                    add_circle_outline
                    </span>Create Canon</button>

                <!- max lenth of 10 ->
                <div class="templateoutertablediv inverttable">
                    <table class="templatetable templatetable2">
                        <tr>
                            <th>Name</th>
                            <th>Canon</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td>[[ canonName ]]:</td>
                            <!- Example: "may not attack 1-20 provinces" ->
                            <td>[[ canon ]]</td>
                            <td><span class="material-icons iconred">
                                remove_circle_outline
                                        </span></td>
                        </tr>
                    </table>
                </div>

            </div>
        -->

            <!--HIDE ALL OF THIS infodiv and header if coalition type is "open"-->
            {% if colType == "closed" and user_role in ["leader", "deputy_leader", "domestic_minister"] %}
            <h2 class="templatecontentheaderleft">Applicants</h2>
            <!--show if coalition has 0 applicants-->
            <h2 class="templatecontentheadercenter">You have {{ requests|length }} applicants</h2>
            <!--hide is coalition has 0 applicants-->
            <div class="infodiv">
                <div class="templatedivflex2 menuflex">
                    <div class="templatedivflex2 divflex2center menuflex">
                        <div class="templatedivflex2left">

                            <input class="loginsignupinput" autocomplete="off" name="apllicantsearch" placeholder="Filter Applicants" />

                        </div>
                        <div class="templatedivflex2left">

                            <button class="templatedivbutton templatecenteredbutton" required><span class="material-icons-outlined">
                                    check
                                    </span>Go</button>

                        </div>
                    </div>
                </div>
                <div class="templateoutertablediv inverttable">
                    <table class="templatetable templatetable2 scrolltable">
                        <tr>
                            <th>Name</th>
                            <th>Influence</th>
                            <th>Message</th>
                            <th>Action</th>
                        </tr>
                        <!--for every applicant make a row-->
                        {% for id, name, message in requests %}
                        <tr>
                            <td><a href="/country/id={{ id[0] }}">{{ name[0] }}</a></td>
                            <td></td>
                            <td class="templatesmalltd">{{ message[0] }}</td>
                            <td>
                                <form method="POST">
                                    <div class="templatedivflex2 menuflex">
                                        <!-- plus sign-->
                                        <div class="templatedivflex2left flexchildvanilla">

                                            <button formaction="/add/{{ id[0] }}"><span class="material-icons iconblue">
                                                check_circle_outline
                                                    </span></button>

                                        </div>
                                        <!-- minus sign-->
                                        <div class="templatedivflex2left flexchildvanilla">

                                            <button formaction="/remove/{{ id[0] }}"><span class="material-icons iconred">
                                                    highlight_off
                                                    </span></button>

                                        </div>
                                    </div>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
            {% endif %} {% if user_role == "leader" %}
            <h2 class="templatecontentheaderleft">General</h2>

            <form method="POST">
                <div class="infodiv">
                    <div class="templatedivflex2 menuflex">
                        <div class="templatedivflex2left">
                            <script>
                                const flagItselfUpload = function(event) {
                                    var output = document.getElementById('imageBackground');
                                    output.src = URL.createObjectURL(event.target.files[0]);
                                    output.style.width = "20vw";
                                    output.style.height = "11.25vw";
                                    output.onload = function() {
                                        URL.revokeObjectURL(output.src) //free memory
                                    }
                                };
                                var flagBackgroundUpload = function(event) {
                                    var output = document.getElementById('imageBackground2');
                                    output.src = URL.createObjectURL(event.target.files[0]);
                                    output.style.width = "20vw";
                                    output.style.height = "11.25vw";
                                    output.onload = function() {
                                        URL.revokeObjectURL(output.src) // free memory
                                    }
                                };
                            </script>
                            <div class="coalitionimagepreview">
                                <img id="imageBackground" />
                            </div>

                            <form action="/update_col_info/{{ colId }}" method="POST" enctype="multipart/form-data">
                                <label for="bgimage">Upload coalition flag</label>

                                <label class="imageinput fit center"><span class="material-icons-outlined">
                            wallpaper
                                </span>Choose Image
                                <input type="file" name="flag_input" id="imageinput" accept="image/*" onchange="flagItselfUpload(event)">
                              </label>
                        </div>
                        <div class="templatedivflex2left">

                            <div class="coalitionimagepreview">
                                <img id="imageBackground2" />
                            </div>

                            <label for="bgimage">Upload flag background</label>

                            <label class="imageinput fit center"><span class="material-icons-outlined">
                            wallpaper
                                </span>Choose Image
                                <input type="file" name="flag_input" id="imageinput" accept="image/*" onchange="flagBackgroundUpload(event)">
                              </label>

                        </div>
                    </div>

                    <div class="templatedivflex2left center">
                        <label>Application type</label>

                        <select class="templateselect center" name="treaty_name">
                    
                            <!--hovering over the options tags will tell the users what they do-->
                            <option value="apply" class="templateoption">Apply</option>
                            <option value="open" class="templateoption">Open</option>
                        </select>
                    </div>



                    <label for="description">War Alert</label>

                    <div class="center">
                        <textarea class="templatetextarea" name="description" placeholder="War alert message" maxlength="240">{{ warAlert }}</textarea>
                    </div>
                    <button class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                    check
                    </span>Update</button>
                </div>
                </form>

                <h2 class="templatecontentheaderleft">Danger Zone</h2>

                <form method="POST">
                    <div class="infodiv">
                        <div class="templatedivflex2 divflex2center menuflex">
                            {% if user_role == "leader" %}
                            <div class="templatedivflex2left">

                                <button type="submit" formaction="/delete_coalition/{{ colId }}" class="templatedivbutton templatecenteredbutton redactionbutton" value="submit"><span class="material-icons-outlined">
                                highlight_off
                                </span>Delete Coalition</button>

                            </div>
                            {% endif %} {% if userInCurCol and user_role != "leader" %}
                            <div class="templatedivflex2left">

                                <button type="submit" class="templatedivbutton templatecenteredbutton redactionbutton" value="submit"><span class="material-icons-outlined">
                                arrow_forward
                                </span>Leave Coalition</button>

                            </div>
                            {% endif %}
                        </div>
                    </div>
                </form>
                {% endif %}
                <!--MEMBER-->
                <div class="member" id="member">

                    <h2 class="templatecontentheaderleft">Bank</h2>

                    <div class="infodiv">

                        <form method="POST">
                            <div class="templateoutertablediv inverttable">
                                <table class="templatetable templatetable2">
                                    <tr>
                                        <th>Resource</th>
                                        <th>My Resources</th>
                                        <th>Action</th>
                                    </tr>
                                    <tr>
                                        <td>Money:</td>
                                        <td>{{ gross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="money" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Rations:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="rations" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Oil:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="oil" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Coal:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="coal" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Uranium:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="uranium" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Iron:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="iron" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Lead:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="lead" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Bauxite:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="bauxite" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Copper:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="copper" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Lumber:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="lumber" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Components:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="components" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Steel:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="steel" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Consumer goods:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="consumer_goods" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Aluminum:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="aluminium" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Gasoline:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="gasoline" placeholder="Amount" /></td>
                                    </tr>
                                    <tr>
                                        <td>Ammunition:</td>
                                        <td>{{ rationsGross }}%</td>
                                        <td><input class="loginsignupinput" autocomplete="on" name="ammunition" placeholder="Amount" /></td>
                                    </tr>
                                </table>
                            </div>

                            <div class="templatedivflex2 divflex2center">
                                <div class="templatedivflex2left">

                                    <button formaction="/request_from_bank/{{ colId }}" class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                            feedback
                            </span>Request</button>

                                </div>
                                <div class="templatedivflex2left">

                                    <button formaction="/deposit_into_bank/{{ colId }}" class="templatedivbutton templatecenteredbutton" type="submit"><span class="material-icons-outlined">
                            arrow_downward
                            </span>Deposit</button>

                                </div>
                            </div>
                    </div>
                    </form>

                    <h2 class="templatecontentheaderleft">Danger Zone</h2>

                    <div class="infodiv">
                        <form action="/leave/{{ colId }}" method="POST">

                            <button type="submit" class="templatedivbutton templatecenteredbutton redactionbutton" value="submit"><span class="material-icons-outlined">
                    arrow_forward
                    </span>Leave Coalition</button>

                        </form>
                    </div>

                </div>

                <!-- currently disabled this because of bug, moved it elsewhere-->
                <!--END-->


        </div>
    </div>
    {% endblock %}